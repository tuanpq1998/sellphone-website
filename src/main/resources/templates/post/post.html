
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
<th:block th:replace="part/_head.html :: head(title = ${post.title})" />

<link rel="stylesheet" th:href="@{/css/css_giohang.css}" type="text/css"
	media="all" />
<script type="text/javascript">
	$(function() {
		$('a[title]').tooltip();
	});
</script>

</head>

<body class="post">
	<th:block th:replace="part/_header.html :: header_top" />
	<th:block th:replace="part/_header.html :: header_bottom" />

	<div th:unless="${#strings.isEmpty(post.bannerImage)}"
		class="sub-banner"
		th:style="${'background: url(' + post.bannerImage +') no-repeat 0px 0px; background-size: cover;'}"></div>

	<div class="faq">

		<div class="post-container container">
			<h1>[[${post.title}]]</h1>
			<div class="container text-right">
				<span class="info-item"><i class="fa fa-folder"></i> <a href="/bai-viet">Tin tức</a></span>
				<span class="info-item"><i class="fa fa-calendar"></i> <span class="ago">[[${post.createAt}]]</span></span>
				<span class="info-item"><i class="fa fa-eye"></i> [[${post.viewCount}]] luợt
					xem</span>
			</div>
			<hr />
			<div class="post-container container row">
				<article class="col-md-8 text-justify">[(${post.body})]</article>


				<div class="col-md-4">
					<h3>Bài viết mới</h3>
					<th:block th:each="post : ${newestPosts}" >
					<div class="row post">
						<div class="news-thumb col-md-4">
							<a
								th:href="${'/bai-viet/' + post.slug + '.' + post.id + '.html'}">
								<img th:src="${post.avaImage}">
							</a>
						</div>
						<div class="col-md-8">
							<a
								th:href="${'/bai-viet/' + post.slug + '.' + post.id + '.html'}">
								<h4 class="news-title">[[${post.title}]]</h4>
							</a> <abbr class="news-time ago">[[${post.createAt}]]</abbr>
						</div>
						
					</div>
					<hr />
					</th:block>
					<div class="text-right">
						<a th:href="${'/bai-viet'}" class="btn btn-lg btn-default">Xem
							thêm <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
						</a>
					</div>
				</div>
			</div>


			<hr />
		</div>


	</div>

	<div class="container">
		<div class="products news">
			<h3>Bài liên quan</h3>
			<div class="row post">
				<div th:each="post : ${randomPosts}" class="col-md-3">
				<a th:href="${'/bai-viet/'+post.slug+'.'+post.id+'.html'}">
					<img th:src="${post.avaImage}">
					<h4 class="news-title">[[${post.title}]]</h4>
				</a>
				<abbr class="news-time ago">[[${post.createAt}]]</abbr>
				</div>

				<div class="clearfix"></div>
			</div>


		</div>


	</div>
	<script>
		$(window).load(function() {
			$('.flexslider').flexslider({
				animation : "slide",
				controlNav : false
			});

		});

		function timeSince(date) {
			let minute = 60;
			let hour = minute * 60;
			let day = hour * 24;
			let month = day * 30;
			let year = day * 365;

			let suffix = ' trước';

			let elapsed = Math.floor((Date.now() - date) / 1000);

			if (elapsed < minute) {
				return 'Vừa xong';
			}

			// get an array in the form of [number, string]
			let a = elapsed < hour && [ Math.floor(elapsed / minute), 'phút' ]
					|| elapsed < day && [ Math.floor(elapsed / hour), 'giờ' ]
					|| elapsed < month && [ Math.floor(elapsed / day), 'ngày' ]
					|| elapsed < year
					&& [ Math.floor(elapsed / month), 'tháng' ]
					|| [ Math.floor(elapsed / year), 'năm' ];

			// pluralise and append suffix
			return a[0] + ' ' + a[1] + (a[0] === 1 ? '' : '') + suffix;
		}

		$('.ago').html(function() {
			const dateTime = Date.parse(($(this).html()));
			return timeSince(dateTime);
		})

		$('.currency').html(function() {
			const num = Number($(this).html());
			return new Intl.NumberFormat('vi-VN', {
				style : 'currency',
				currency : 'VND'
			}).format(num);
		});
	</script>
	<th:block th:replace="part/_footer.html :: newsletter" />


	<th:block th:replace="part/_footer.html :: footer" />


</body>
</html>